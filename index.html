
<!doctype html>
<html>
<head>
    <title>Rental Financials</title>
</head>
<body>
    <table border="1">
        <tr><td>
            <label for="txtTax">Yearly Costs</label>:
            <input id="txtTax" name="txtTax" type="text" size="2" value="3400"/>
        </td><td>
            <label for="txtExpense">Expense Rate</label>:
            <input id="txtExpense" name="txtExpense" type="text" size="2" value="20"/>
        </td><td>
            <label for="txtMort">Mortgage Rate</label>:
            <input id="txtMort" name="txtMort" type="text" size="2" value="5"/>
        </td></tr><tr><td>
            <label for="txtTerm">Term (years)</label>:
            <input id="txtTerm" name="txtTerm" type="text" size="2" value="30"/>
        </td><td>
            <label for="txtProfitRate">Profit Rate</label>:
            <input id="txtProfitRate" name="txtProfitRate" type="text" size="2" value="12"/>
        </td><td>
            <label for="txtReturn">Return Rate</label>:
            <input id="txtReturn" name="txtReturn" type="text" size="2" value="7"/>
        </td></tr>
    </table>
    <br />
    <br />
    <table border="1">
        <tr>
            <td>rent</td>
            <td>expenses</td>
            <td>profit</td>
            <td>total costs</td>
            <td>net</td>
            <td>loan</td>
            <td>down</td>
            <td>price</td>
            <td>Present Value Profit</td>
            <td>Present Value Sale</td>
            <td>Internal Rate of Return</td>
        </tr>
        <tr>
            <td id='rRent'><input id="rent" size="2" value="1900"/></b></td>
            <td id='rExpense'>380</td>
            <td id='rProfit'>228</td>
            <td id='rCosts'>891</td>
            <td id='rNet'>1008</td>
            <td id='rLoan'>187896</td>
            <td id='rDown'>46974</td>
            <td id='rPrice'>234870</td>
            <td id='rPVP'>34270</td>
            <td id='rPVS'>30854</td>
            <td id='rIRR'>8.9</td>
        </tr>
    </table>
    <script type="text/javascript" src="rentalFinancials.js"></script>
    <script type="text/javascript">
        'use strict';
        // When the window is loaded
        let inputIDs = ["txtTax", "txtExpense", "txtMort", "txtTerm", "txtProfitRate", "txtReturn", "rent"];
        let displayIDs = ["rExpense", "rProfit", "rCosts", "rNet", "rLoan", "rDown", "rPrice", "rPVP", "rPVS", "rIRR"];
        
        // Event listener
        for (let i = 0; i < inputIDs.length; i++) {
            document.getElementById(inputIDs[i]).addEventListener("input", function(){
                let values = UPDATES.updateFromValues();
                let userValues = UPDATES.createValuesObject(values);
                let calculatedValues = UPDATES.performCalculations(userValues);
                UPDATES.updateDisplay(calculatedValues);
            });
        }

        class UPDATES {
            static updateFromValues() {
                // pulls the user inputed data from the DOM
                // TO DO: Validate before pushing to array
                for (let i = 0; i < inputIDs.length; i++) {
                    var values = [];
                    values.push(document.getElementById(inputIDs[i]).value);
                }
            return values;
            }

            static createValuesObject(values) {
                // adds the user inputed data from a given array to an object
                let userValues = {
                    tax: values[0],
                    expRate: values[1],
                    mortRate: values[2],
                    term: values[3],
                    profRate: values[4],
                    returnRate: values[5],
                    rent: values[6]
                }
                return userValues;
            }

            static performCalculations(userValues) {
                // performs calculations based upon user inputed data
                let calculatedValues = {
                    rExpense: 0,
                    rProfit: 0,
                    rCosts: 0,
                    rNet: 0,
                    rLoan: 0,
                    rDown: 0,
                    rPrice: 0,
                    rPVP: 0, //Present Value Profit
                    rPVS: 0, //Present Value Sale
                    rIRR: 0 //Internal Rate of Return
                }
                return calculatedValues;
            }

            static updateDisplay(calculatedValues) {
                // pushes the calculated values to the DOM
                for (let i = 0; i < displayIDs.length; i++) {
                    document.getElementById(displayIDs[i]).innerHTML = calculatedValues[displayIDs[i]];
                }
            }
        }
    </script>
</body>
</html>